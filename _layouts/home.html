---
layout: default
---

{% include instructor_hero.html instructor_id='zhenyuan_lu' %}

<main class="max-w-7xl mx-auto px-4 py-6">
  <!-- Search and Filters -->
  <div class="mb-8 space-y-4">
    <div class="relative">
      <input
        type="text"
        id="searchInput"
        placeholder="Search courses by title, code or description..."
        class="w-full px-12 py-3 rounded-xl border bg-white
                 focus:ring-2 focus:ring-blue-500 focus:border-transparent"
        onkeyup="filterCourses()"
      />
      <i class="fas fa-search absolute left-4 top-3.5 h-5 w-5 text-gray-400"></i>
    </div>

    <div class="flex flex-wrap gap-4">
      <!-- Level Filter -->
      <select id="levelFilter" onchange="filterCourses()" class="px-4 py-2 rounded-lg border bg-white">
        {% assign levels = site.courses | map: 'level' | uniq | sort %}
        <option value="all">All Levels</option>
        {% for level in levels %}
          <option value="{{ level }}">{{ level }}</option>
        {% endfor %}
      </select>
      
      <!-- Semester Filter -->
      <select id="semesterFilter" onchange="filterCourses()" class="px-4 py-2 rounded-lg border bg-white">
        {% assign semesters = site.courses | map: 'semester' | uniq | sort %}
        <option value="all">All Semesters</option>
        {% for semester in semesters %}
          <option value="{{ semester }}">{{ semester }}</option>
        {% endfor %}
      </select>

      <!-- Status Filter -->
      <select id="statusFilter" onchange="filterCourses()" class="px-4 py-2 rounded-lg border bg-white">
        {% assign statuses = site.courses | map: 'status' | uniq | sort %}
        <option value="all">All Statuses</option>
        {% for status in statuses %}
          <option value="{{ status }}">{{ status | capitalize }}</option>
        {% endfor %}
      </select>
    </div>
  </div>

  <!-- Course Grid -->
  <div id="courseGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
    {% for course in site.courses %}
      {% include course_card.html course=course %}
    {% endfor %}
  </div>

  <!-- Empty State -->
  <div id="noCoursesMessage" class="text-center py-12 hidden">
    <p class="text-gray-600">
      No courses found matching your criteria. Try adjusting your filters.
    </p>
  </div>
</main>

<script>
  function filterCourses() {
    var searchInput = document.getElementById('searchInput').value.toLowerCase();
    var levelFilter = document.getElementById('levelFilter').value;
    var semesterFilter = document.getElementById('semesterFilter').value;
    var statusFilter = document.getElementById('statusFilter').value;
    var courses = document.querySelectorAll('.course-card');
    var noCoursesMessage = document.getElementById('noCoursesMessage');
    var courseGrid = document.getElementById('courseGrid');
    var visibleCount = 0;

    courses.forEach(function(course) {
      var title = course.getAttribute('data-title').toLowerCase();
      var code = course.getAttribute('data-code').toLowerCase();
      var description = course.getAttribute('data-description').toLowerCase();
      var level = course.getAttribute('data-level');
      var semester = course.getAttribute('data-semester');
      var status = course.getAttribute('data-status');

      var matchesSearch = title.includes(searchInput) || code.includes(searchInput) || description.includes(searchInput);
      var matchesLevel = levelFilter === 'all' || level === levelFilter;
      var matchesSemester = semesterFilter === 'all' || semester === semesterFilter;
      var matchesStatus = statusFilter === 'all' || status === statusFilter;

      if (matchesSearch && matchesLevel && matchesSemester && matchesStatus) {
        course.classList.remove('hidden');
        visibleCount++;
      } else {
        course.classList.add('hidden');
      }
    });

    if (visibleCount === 0) {
      noCoursesMessage.classList.remove('hidden');
      courseGrid.classList.add('hidden');
    } else {
      noCoursesMessage.classList.add('hidden');
      courseGrid.classList.remove('hidden');
    }
  }
</script>
